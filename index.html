<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>President University Motor Registration Form</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:#f1f3f4;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:50px 20px;}
.container{width:100%;max-width:720px;background:#fff;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,0.1);overflow:hidden;animation:fadeIn 1s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
.header{background:#673ab7;color:white;padding:25px 40px;}
.header h1{font-size:26px;font-weight:500;}
.header p{margin-top:8px;font-size:15px;opacity:0.9;}
.progress-bar{height:6px;background:#d1c4e9;width:100%;position:relative;}
.progress{height:6px;background:#512da8;width:0%;transition:width 0.4s ease;}
.form-step{display:none;padding:40px;animation:slideIn 0.5s ease;}
@keyframes slideIn{from{opacity:0;transform:translateX(20px);}to{opacity:1;transform:translateX(0);}}
.form-step.active{display:block;}
.form-group{margin-bottom:25px;}
label{display:block;font-weight:500;margin-bottom:8px;color:#202124;}
input,select,textarea{width:100%;border:none;border-bottom:2px solid #dadce0;padding:10px 5px;font-size:15px;outline:none;background:transparent;transition:border-color 0.3s;}
input:focus,select:focus,textarea:focus{border-color:#673ab7;}
textarea{resize:none;height:70px;}
.btns{display:flex;justify-content:space-between;margin-top:20px;}
button{background:#673ab7;color:#fff;border:none;padding:12px 28px;border-radius:8px;font-weight:500;font-size:15px;cursor:pointer;transition:all 0.3s;}
button:hover{background:#5e35b1;transform:translateY(-1px);box-shadow:0 4px 10px rgba(103,58,183,0.3);}
.success{display:none;padding:40px;text-align:center;color:#34a853;font-weight:500;font-size:18px;}
.footer{text-align:center;padding:20px;font-size:13px;color:#777;border-top:1px solid #eee;}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>Motor Registration Form</h1>
    <p>President University SBH — Please fill out all information correctly.</p>
  </div>
  <div class="progress-bar"><div class="progress" id="progress"></div></div>

  <form id="multiForm">
    <!-- STEP 1 -->
    <div class="form-step active">
      <div class="form-group">
        <label>Full Name *</label>
        <input type="text" name="name" required>
      </div>
      <div class="form-group">
        <label>Email Address *</label>
        <input type="email" name="email" required>
      </div>
      <div class="form-group">
        <label>Phone Number *</label>
        <input type="tel" name="phone" required>
      </div>
      <div class="btns">
        <div></div>
        <button type="button" onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="form-step">
      <div class="form-group">
        <label>Gender *</label>
        <select name="gender" required>
          <option value="">Select</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label>Date of Birth *</label>
        <input type="date" name="dob" required>
      </div>
      <div class="form-group">
        <label>Major *</label>
        <select name="major" required>
          <option value="">Select</option>
          <option>Accounting</option>
          <option>Management</option>
          <option>Information Technology</option>
          <option>Law</option>
          <option>Engineering</option>
        </select>
      </div>
      <div class="btns">
        <button type="button" onclick="prevStep()">Back</button>
        <button type="button" onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="form-step">
      <div class="form-group">
        <label>Motorcycle Plate Number *</label>
        <input type="text" name="plate" required>
      </div>
      <div class="form-group">
        <label>Motorcycle Brand & Type *</label>
        <input type="text" name="type" required>
      </div>
      <div class="form-group">
        <label>Color *</label>
        <input type="text" name="color" required>
      </div>
      <div class="btns">
        <button type="button" onclick="prevStep()">Back</button>
        <button type="button" onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 4 -->
    <div class="form-step">
      <div class="form-group">
        <label>Upload STNK Photo *</label>
        <input type="file" id="stnk" accept="image/*">
      </div>
      <div class="form-group">
        <label>Address *</label>
        <textarea name="address" required></textarea>
      </div>
      <div class="form-group">
        <label>Additional Notes</label>
        <textarea name="notes"></textarea>
      </div>
      <div class="btns">
        <button type="button" onclick="prevStep()">Back</button>
        <button type="submit">Submit</button>
      </div>
    </div>
  </form>

  <div class="success" id="successMsg">
    ✅ Your form has been submitted successfully!  
    Thank you for registering your motorcycle.
  </div>

  <div class="footer">
    © 2025 President University SBH | Created by Dhany Dewanto Putra
  </div>
</div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyB6nFtk8J6NnZx9IZoaQGPHN83rOzpjyL0",
    authDomain: "motorform-794fb.firebaseapp.com",
    databaseURL: "https://motorform-794fb-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "motorform-794fb",
    storageBucket: "motorform-794fb.appspot.com",
    messagingSenderId: "267860952647",
    appId: "1:267860952647:web:69d2ad56d4c523c46f9362"
  };
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  const steps = document.querySelectorAll(".form-step");
  const progress = document.getElementById("progress");
  const form = document.getElementById("multiForm");
  const success = document.getElementById("successMsg");
  let currentStep = 0;

  function updateProgress() {
    const percent = ((currentStep + 1) / steps.length) * 100;
    progress.style.width = percent + "%";
  }

  function nextStep() {
    if (currentStep < steps.length - 1) {
      steps[currentStep].classList.remove("active");
      currentStep++;
      steps[currentStep].classList.add("active");
      updateProgress();
    }
  }

  function prevStep() {
    if (currentStep > 0) {
      steps[currentStep].classList.remove("active");
      currentStep--;
      steps[currentStep].classList.add("active");
      updateProgress();
    }
  }

  form.addEventListener("submit", (e) => {
    e.preventDefault();

    // Ambil data form
    const formData = {
      name: form.name.value,
      email: form.email.value,
      phone: form.phone.value,
      gender: form.gender.value,
      dob: form.dob.value,
      major: form.major.value,
      plate: form.plate.value,
      type: form.type.value,
      color: form.color.value,
      address: form.address.value,
      notes: form.notes.value
    };

    // Simpan ke Firebase
    database.ref("registrations").push(formData, (error) => {
      if (error) {
        alert("Failed to submit: " + error);
      } else {
        form.style.display = "none";
        success.style.display = "block";
        progress.style.width = "100%";
      }
    });
  });

  updateProgress();
</script>
</body>
</html>
